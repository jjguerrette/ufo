# Verifies that the BackgroundErrorVertInterp obs operator produces correct obs diagnostics
# when using a "logarithmic" vertical coordinate (air pressure).

window begin: 2018-04-14T20:00:00Z
window end: 2018-04-15T03:00:00Z
obs space:
  name: Sondes
  obsdatain:
    obsfile: Data/ufo/testinput_tier_1/sondes_obs_2018041500_s.nc4
# obsdataout:
#   obsfile: Data/sondes_obs_2018041500_s_vertinterp_pressure_out.nc4
  simulated variables: [air_temperature, specific_humidity, northward_wind, eastward_wind]
obs operator:
  name: Composite
  components:
  # operator used to evaluate H(x)
  - name: VertInterp
  # operator used to evaluate background errors
  - name: BackgroundErrorVertInterp
    observation vertical coordinate: air_pressure
    vertical coordinate: background_error_air_pressure
geovals:
  filename: Data/ufo/testinput_tier_1/sondes_background_error_vert_interp_air_pressure_geoval_2018041500_s.nc4
obs diagnostics:
  variables: [northward_wind_background_error, specific_humidity_background_error]
reference obs diagnostics:
  filename: Data/ufo/testinput_tier_1/sondes_background_error_vert_interp_air_pressure_obsdiag_2018041500_s.nc4
tolerance: 1.e-6
